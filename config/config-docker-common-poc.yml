debug: True
logging:
  level: "info"

app:
  app_id: "scriber_public_poc"
  secret_key: "hello_remarkable"
  jwt_secret_key: "f47ac10b58cc4372a5670e02b2c3d479"
  token_expire: 120
  session_expire: 7200 # session过期时间, 不配置默认600s
  rate_limit_expire: 7200 # 接口访问频率限制时间, 不配默认60s(暂未启用)
  max_fail_count: 100 # session有效期内最大尝试登录次数, 不配默认10次, 超过限制次数继续登录会被持续封禁
  auth:
    label:
      app_id: ""
      secret_key: ""
      token_expire: 300
    roster:
      app_id: ""
      secret_key: ""
      token_expire: 300
      url: ""
    pdfinsight:
      app_id: "pdfinsight"
      secret_key: "show-me-the-money"
      token_expire: 120
      url: "http://pdfinsight:8096"
      docx_as_pdf: True
    studio:
      url: "https://staging.chatdoc.studio/chatdoc-studio"
      api_key: "sk-CkCyiofokALgvYglXFPcEbE7K7WudzJQOb8IoxxN3gnvp9Bf"
      timeout: 60
      upload: "/external/api/v1/uploads"
      app: "/external/api/v1/extract/apps"
      app_with_id: "/external/api/v1/extract/apps/{}"
      app_upload: "/external/api/v1/extract/apps/{}/uploads"
      app_remove_upload: "/external/api/v1/extract/apps/{}/uploads/{}"
      app_extract_again: "/external/api/v1/extract/apps/{}/uploads/{}/extract-again"
      app_upload_extraction: "/external/api/v1/extract/apps/{}/uploads/{}/extraction"
#      app_upload_trace: "/external/api/v1/extract/apps/{}/uploads/{}/trace"
      app_upload_trace: "/external/api/v1/extract/apps/{}/uploads/{}/source-fragments"
      app_hook: "/external/api/v1/app/webhooks"
      llm_list: [ "gpt-4o-mini", "deepseek/deepseek-r1", "qwen/qwen3-next-80b-a3b-instruct" ]

web:
  http_port: 8080
  domain: "scriber:8000"
  plugins:
    - "fileapi"
    - "ext_api"
    - "cgs" # 银河证券
    - "inspector" # 审核模块(审核模块的部分接口在cgs/handlers.py,启用inspector时,需同步启用cgs)
    - "debug"
  classes:
    
    answer_converter:
      光大POC: "remarkable.converter.ebscn.EbscnWorkShop"
    answer_predictor:
      科创板招股说明书信息抽取poc: "remarkable.plugins.predict.config.sse_anno.SSEAnnoPredictor"
      科创板招股说明书信息抽取: "remarkable.plugins.sse.sse_proex_predictor.SSEProExPredictor"
      重组报告业务i: "remarkable.plugins.fileapi.predict.RegroupPredictor"
  apis:
    sso: ""
    login_callback: ""
    get_label_user: ""
    get_label_user_by_cn_list: ""
    sync_file: ""
    sync_host: ""
  pdf_converter: "{project_root}/bin/converter/word2pdf.exe"
  tmp_dir: "{project_root}/data/tmp/"
  data_dir: "{project_root}/data/files/"
  prompter_dir: "{project_root}/data/prompter/"
  default_question_health: 1
  readonly_mold_list:
    - 1
    - 2
    - 3
    - 4
    - 5
    - 6
    - 7
    - 8
    - 9
    - 10
  force_ocr_mold_list:
    - 54
    - "深圳标准研究院_标准文件"
  default_mold_public: False
  preset_answer: True
  limit_of_preset_num: 10 # 限制预测答案的个数
  limit_of_crude_elts: 5 # 限制读取预测元素块的个数
  show_merge_answer: False # 前端是否显示"合并的答案"按钮
  record_manual: False # 前端是否显示"采用答案"按钮
  predict_from_memory:
    switch: True
    data_dir: "{project_root}/data/tbl_headers/"
  show_export_answer: False # 显示/隐藏"导出的答案"按钮(上交所)
  show_marker: False
  model_manage: True # 模型版本管理
  enable_remote_model: True # 提取模型配置中，启用对接远程模型选项
  data_abroad: False # 数据生产（对接外部数据库）
  model_abroad: False # 模型接入（接入外部模型）
  chapter_assist: True # 是否开启章节辅助标注功能
  table_association: True # 是否开启表格辅助标注功能
  export_special_data: False # 下载转义结果 https://gitpd.paodingai.com/cheftin/docs_scriber/-/issues/1379#note_275972
  customer_answer: True # 生成客户定制化答案
  enable_llm_extract: True
  run_lock_expired: 60


db:
  host: "postgres"
  port: 5432
  dbname: "scriber"
  user: "postgres"
  password: ""

redis:
  host: redis
  port: 6379
  db: 1
  password: "scriber"

client:
  name: "common_poc" # hkex, szse
  remark_progress_type: "level1" # all
  language: "zh_CN" # en_US
  hide_rough_fields: True
  support_multiple_molds: True
  export_label_data: True # 是否支持"导出标注json"
  export_label_txt: False  # 是否支持"导出标注txt"
  export_answer_csv: True # 是否支持"导出答案csv"
  show_prompt_element_button: True # 是否显示AI位置推荐按钮
  check_schema_base_type: False
  export_single_answer: False # 是否显示导出标注/预测答案按钮
  stat_accuracy: True # 是否支持统计模型正确率
  
  show_all_predict_items: True
  answer_default_display_level: 1 # 答案默认展开级别, 数字代表展开到第n级
  ocr:
    enable: True
    service: "pai"

worker:
  app_name: "remarkable"
  default_queue: "celery"

feature:  # 功能特性相关配置
  batch_delete: True  # 批量删除功能
  show_develop_model_test: True  # 是否展示定制模型的'查看准确率'按钮
  inspect_modules: True
  default_audit_rule_public: False  # 创建的audit_rule.public默认为False
  additional_permissions:
    customer_rule_participate:
      name: "规则管理"
      definition: "可创建自定义规则，对提取结果进行审核"
    inspect:
      name: "规则审核"
      definition: "可查看规则审核的结果"

prompter:
  mode: "v2"
  use_syllabuses: True
  tokenization: "jieba"
  context_length: 1
  workers: 4
  batch_size: 100
  auto_build_ignores: "*"
  answer_version: 2.2
  training_data_status: "2, 5, 10, 100"

prophet:
  multi_packages:
    - "cmschina_predictor"
    - "china_stock_predictor"
    - "szse_poc_predictor"
    - "guosen_predictor"
    - "ecitic_predictor"
    - "ebscn_predictor"
    - "common_poc_predictor"
    - "gffunds_poc_predictor"
  config_map:
    公募-资产管理合同: "public_asset_management"
    创业板招股说明书-财务基础数据: "financial_data"
    公募-基金合同: "public_fund"
    公募-基金合同-二: "public_fund_2"
    私募基金合同-poc: "poc_private_fund"
    私募基金合同: "ecitic_private_fund"
    国信证券-私募证券投资基金基金合同POC: "guosen_private_securities"
    光大POC: "ebscn_private_fund"
    深圳标准研究院_标准文件: "sist_standard_doc"
    中信交易部_股权激励合并: "equity_incentive"
    招商公募基金合同: "cmfchina_public_fund"
    招商资管合同: "cmfchina_asset_management"
    公募招募说明书: "cmschina_prospectus"
    公募-季报: "fund_quarterly_1"
    公募-年中报: "fund_annual_report"
    公募-招募说明书: "prospectus"

inspector:
  package_name: "default_checker"

data_flow: # 逐步把数据流相关的配置项挪过来
  post_pipe_after_preset: True # 预测完之后是否执行后处理
  file_answer:
    generate: True # 生成文件级的答案

# 公共演示环境没有导出一个schema的包,故需手动导入schema和部署模型
#build:
#  docker:
#    cli_pipe:

#      - 'inv op.deploy-model 公募-资产管理合同 --name=china_stock_public_asset_management'


#      - 'inv op.deploy-model "科创板招股说明书信息抽取poc" --name=sse'
_new_entry:
  "prompter.training_data_status": "prompter.trainning_data_status"
